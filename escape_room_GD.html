<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escape Room: El Caso de los Datos Perdidos (Mejorado)</title>
    <!-- Enlace al archivo CSS externo -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç El Caso de los Datos Perdidos</h1>
            <p>Investigaci√≥n de Clasificaci√≥n de Datos</p>
        </div>

        <div class="progress-bar" id="progressBar">
            <div class="progress-step active" data-section="1">Secci√≥n 1</div>
            <div class="progress-step" data-section="2">Secci√≥n 2</div>
            <div class="progress-step" data-section="3">Secci√≥n 3</div>
            <div class="progress-step" data-section="4">Secci√≥n 4</div>
            <div class="progress-step" data-section="5">Secci√≥n 5</div>
        </div>

        <!-- SECCI√ìN 1: TIPOS DE DATOS -->
        <div class="section active" id="section1">
            <h2>üìã Secci√≥n 1: El Archivo del Sospechoso</h2>
            <div class="story-text">
                <p><strong>Expediente 001:</strong> Has sido asignado como investigador principal del caso de DataCorp. La empresa ha sufrido una grave crisis de datos donde informaci√≥n cr√≠tica est√° mezclada sin clasificar. Tu primera tarea: encontrar el expediente del sospechoso principal.</p>
                <p>En la escena del crimen, encuentras varios tipos de documentos mezclados. Debes identificar qu√© tipo de dato corresponde a cada documento para organizar la evidencia correctamente.</p>
            </div>

            <div class="puzzle-container">
                <h3>üîé Acertijo: Clasifica los siguientes datos seg√∫n su tipo</h3>
                <p>Arrastra cada documento a su categor√≠a correcta:</p>
                
                <div style="margin: 20px 0;">
                    <div class="data-card" draggable="true" data-type="maestros">
                        üìÑ Lista de todos los empleados de la empresa con su informaci√≥n personal √∫nica
                    </div>
                    <div class="data-card" draggable="true" data-type="transaccional">
                        üìä Registro de cada venta realizada en el √∫ltimo mes
                    </div>
                    <div class="data-card" draggable="true" data-type="referencia">
                        üìç Cat√°logo de c√≥digos postales y nombres de pa√≠ses
                    </div>
                    <div class="data-card" draggable="true" data-type="metadata">
                        üè∑Ô∏è Informaci√≥n sobre cu√°ndo fue creada la base de datos y qui√©n la modific√≥
                    </div>
                    <div class="data-card" draggable="true" data-type="eventos">
                        ‚ö° Registro de acceso al sistema a las 14:35 hrs del usuario admin
                    </div>
                </div>

                <h4>Categor√≠as de Datos:</h4>
                <div class="drag-zone" data-category="maestros">
                    <strong>Datos Maestros:</strong> <span id="drop-maestros"></span>
                </div>
                <div class="drag-zone" data-category="transaccional">
                    <strong>Datos Transaccionales:</strong> <span id="drop-transaccional"></span>
                </div>
                <div class="drag-zone" data-category="referencia">
                    <strong>Datos de Referencia:</strong> <span id="drop-referencia"></span>
                </div>
                <div class="drag-zone" data-category="metadata">
                    <strong>Metadatos:</strong> <span id="drop-metadata"></span>
                </div>
                <div class="drag-zone" data-category="eventos">
                    <strong>Datos de Eventos:</strong> <span id="drop-eventos"></span>
                </div>

                <button onclick="checkSection1()">Verificar Clasificaci√≥n</button>
                <div class="feedback" id="feedback1"></div>
            </div>

            <div class="hint">
                üí° <strong>Pista:</strong> Los datos maestros son la informaci√≥n clave de las entidades principales. Los transaccionales registran operaciones. Los de referencia son cat√°logos est√°ndar. Los metadatos describen otros datos.
            </div>
        </div>

        <!-- SECCI√ìN 2: CLASIFICACI√ìN POR CONTENIDO -->
        <div class="section" id="section2">
            <h2>üóÇÔ∏è Secci√≥n 2: Los Dominios del Crimen</h2>
            <div class="story-text">
                <p><strong>Expediente 002:</strong> Excelente trabajo, investigador. Ahora que has clasificado los tipos de datos, necesitas organizar la evidencia por dominios de datos. El sospechoso ha dejado rastros en diferentes √°reas de negocio.</p>
                <p>Los datos est√°n dispersos en m√∫ltiples dominios. Debes identificar a qu√© √°rea tem√°tica pertenece cada pieza de evidencia para reconstruir el caso.</p>
            </div>

            <div class="puzzle-container">
                <h3>üîé Acertijo: Asigna cada dato a su dominio correcto</h3>
                
                <div style="margin: 20px 0;">
                    <div class="data-card" onclick="selectCard(this, 2)" data-domain="clientes">
                        Nombre, direcci√≥n y preferencias de compra de Juan P√©rez
                    </div>
                    <div class="data-card" onclick="selectCard(this, 2)" data-domain="finanzas">
                        Factura #45321 por $15,000 pagada mediante transferencia
                    </div>
                    <div class="data-card" onclick="selectCard(this, 2)" data-domain="productos">
                        Especificaciones t√©cnicas del modelo X-2000 y su precio de venta
                    </div>
                    <div class="data-card" onclick="selectCard(this, 2)" data-domain="empleados">
                        Contrato laboral y puesto de Mar√≠a Gonz√°lez en el departamento de TI
                    </div>
                    <div class="data-card" onclick="selectCard(this, 2)" data-domain="operaciones">
                        Ruta de env√≠o del pedido #78945 desde el almac√©n hasta el cliente
                    </div>
                </div>

                <h4>Selecciona el dominio para cada dato:</h4>
                <select id="domain-select" disabled>
                    <option value="">-- Primero selecciona un dato arriba --</option>
                    <option value="clientes">Dominio de Clientes</option>
                    <option value="finanzas">Dominio de Finanzas</option>
                    <option value="productos">Dominio de Productos</option>
                    <option value="empleados">Dominio de Empleados</option>
                    <option value="operaciones">Dominio de Operaciones</option>
                </select>

                <button onclick="assignDomain()">Asignar Dominio</button>
                <!-- Se elimina el bot√≥n "Verificar Clasificaci√≥n" ya que la verificaci√≥n se hace en assignDomain -->
                <div class="feedback" id="feedback2"></div>
            </div>

            <div class="hint">
                üí° <strong>Pista:</strong> Los dominios representan √°reas tem√°ticas del negocio. Piensa en qu√© departamento o funci√≥n empresarial usar√≠a cada tipo de informaci√≥n.
            </div>
        </div>

        <!-- SECCI√ìN 3: CLASIFICACI√ìN POR FORMATO -->
        <div class="section" id="section3">
            <h2>üìÅ Secci√≥n 3: Los Formatos Ocultos</h2>
            <div class="story-text">
                <p><strong>Expediente 003:</strong> La investigaci√≥n avanza. Has descubierto que el sospechoso almacen√≥ datos en diferentes formatos para ocultar la evidencia. Necesitas identificar el formato de cada archivo encontrado.</p>
                <p>En la computadora del sospechoso hay archivos en m√∫ltiples formatos. Clasificarlos correctamente es crucial para acceder a la informaci√≥n.</p>
            </div>

            <div class="puzzle-container">
                <h3>üîé Acertijo: Identifica el formato correcto de cada archivo</h3>
                
                <div style="margin: 20px 0;">
                    <div style="margin: 15px 0;">
                        <p><strong>Archivo 1:</strong> Contiene filas y columnas de datos de ventas que se pueden filtrar y ordenar</p>
                        <!-- Se cambia el ID para que coincida con la l√≥gica de checkSection3 -->
                        <input type="text" id="validation1" placeholder="Escribe el concepto de calidad (ej: Unicidad, Integridad Referencial, etc.)">
                    </div>
                    
                    <div style="margin: 15px 0;">
                        <p><strong>Archivo 2:</strong> Clave for√°nea en una tabla que debe existir como clave primaria en otra</p>
                        <!-- Se cambia el ID para que coincida con la l√≥gica de checkSection3 -->
                        <input type="text" id="validation2" placeholder="Escribe el concepto de calidad">
                    </div>
                    
                    <div style="margin: 15px 0;">
                        <p><strong>Archivo 3:</strong> Un campo de fecha que siempre debe seguir el patr√≥n AAAA-MM-DD</p>
                        <!-- Se cambia el ID para que coincida con la l√≥gica de checkSection3 -->
                        <input type="text" id="validation3" placeholder="Escribe el concepto de calidad">
                    </div>
                    
                    <!-- Se eliminan los acertijos 4 y 5 de la secci√≥n 3 original para simplificar y alinear con la l√≥gica de checkSection3 que solo verifica 3 campos. Se ajustan los textos para que encajen con los conceptos de calidad de datos que la funci√≥n checkSection3 espera (Unicidad, Integridad Referencial, Formato). -->
                </div>

                <button onclick="checkSection3()">Verificar Conceptos de Calidad</button>
                <div class="feedback" id="feedback3"></div>
            </div>

            <div class="hint">
                üí° <strong>Pista:</strong> Piensa en los pilares de la Calidad de Datos: **Unicidad** (no duplicados), **Integridad Referencial** (relaciones v√°lidas) y **Formato** (estructura consistente).
            </div>
        </div>

        <!-- SECCI√ìN 4: CLASIFICACI√ìN POR NIVEL DE PROTECCI√ìN -->
        <div class="section" id="section4">
            <h2>üîí Secci√≥n 4: La Matriz de Seguridad</h2>
            <div class="story-text">
                <p><strong>Expediente 004:</strong> Est√°s muy cerca de resolver el caso. Has descubierto que el sospechoso clasific√≥ los datos seg√∫n su nivel de sensibilidad. Necesitas reconstruir la matriz de seguridad para entender qu√© informaci√≥n fue comprometida.</p>
                <p>Diferentes datos requieren diferentes niveles de protecci√≥n. Clasif√≠calos correctamente para determinar el alcance del da√±o.</p>
            </div>

            <div class="puzzle-container">
                <h3>üîé Acertijo: Clasifica cada dato seg√∫n su nivel de protecci√≥n</h3>
                
                <table class="matrix-table">
                    <thead>
                        <tr>
                            <th>Tipo de Dato</th>
                            <th>Nivel de Protecci√≥n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>N√∫mero de tarjeta de cr√©dito de un cliente</td>
                            <td>
                                <!-- Se cambia el ID para que coincida con la l√≥gica de checkSection4 -->
                                <select id="security3"> <!-- Cr√≠tico -->
                                    <option value="">Seleccionar...</option>
                                    <option value="publico">P√∫blico</option>
                                    <option value="interno">Interno</option>
                                    <option value="confidencial">Confidencial</option>
                                    <option value="critico">Cr√≠tico/Restringido</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Cat√°logo de productos disponibles en el sitio web</td>
                            <td>
                                <!-- Se cambia el ID para que coincida con la l√≥gica de checkSection4 -->
                                <select id="security1"> <!-- P√∫blico -->
                                    <option value="">Seleccionar...</option>
                                    <option value="publico">P√∫blico</option>
                                    <option value="interno">Interno</option>
                                    <option value="confidencial">Confidencial</option>
                                    <option value="critico">Cr√≠tico/Restringido</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Memor√°ndum interno sobre cambios de pol√≠tica</td>
                            <td>
                                <!-- Se cambia el ID para que coincida con la l√≥gica de checkSection4 -->
                                <select id="security4"> <!-- Interno -->
                                    <option value="">Seleccionar...</option>
                                    <option value="publico">P√∫blico</option>
                                    <option value="interno">Interno</option>
                                    <option value="confidencial">Confidencial</option>
                                    <option value="critico">Cr√≠tico/Restringido</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Estrategia financiera y planes de fusi√≥n de la empresa</td>
                            <td>
                                <!-- Se cambia el ID para que coincida con la l√≥gica de checkSection4 -->
                                <select id="security2"> <!-- Confidencial -->
                                    <option value="">Seleccionar...</option>
                                    <option value="publico">P√∫blico</option>
                                    <option value="interno">Interno</option>
                                    <option value="confidencial">Confidencial</option>
                                    <option value="critico">Cr√≠tico/Restringido</option>
                                </select>
                            </td>
                        </tr>
                        <!-- Se elimina el acertijo 5 de la secci√≥n 4 original para simplificar y alinear con la l√≥gica de checkSection4 que solo verifica 4 campos. -->
                    </tbody>
                </table>

                <button onclick="checkSection4()">Verificar Clasificaci√≥n de Seguridad</button>
                <div class="feedback" id="feedback4"></div>
            </div>

            <div class="hint">
                üí° <strong>Pista:</strong> P√∫blico = disponible para todos; Interno = solo empleados; Confidencial = informaci√≥n sensible del negocio; Cr√≠tico = datos regulados o de m√°xima sensibilidad.
            </div>
        </div>

        <!-- SECCI√ìN 5: CLASIFICACI√ìN POR ALMACENAMIENTO Y ACCESO -->
        <div class="section" id="section5">
            <h2>üíæ Secci√≥n 5: El Mapa del Almacenamiento</h2>
            <div class="story-text">
                <p><strong>Expediente 005:</strong> ¬°√öltima fase de la investigaci√≥n! Has rastreado d√≥nde y c√≥mo se almacenan los datos. El sospechoso ha distribuido informaci√≥n en diferentes ubicaciones y m√©todos de acceso. Descubre el patr√≥n para cerrar el caso.</p>
                <p>La clave final est√° en entender c√≥mo y d√≥nde se accede a cada tipo de dato. Completa este √∫ltimo acertijo para resolver el misterio.</p>
            </div>

            <div class="puzzle-container">
                <h3>üîé Acertijo Final: Empareja cada escenario con su m√©todo de almacenamiento/acceso</h3>
                
                <div style="margin: 20px 0;">
                    <p><strong>Escenario A:</strong> Datos que necesitan ser consultados instant√°neamente por miles de usuarios simult√°neos</p>
                    <select id="storage1">
                        <option value="">Seleccionar m√©todo...</option>
                        <option value="memoria">En Memoria (RAM/Cache)</option>
                        <option value="base">Base de Datos Transaccional</option>
                        <option value="archivo">Sistema de Archivos</option>
                        <option value="nube">Almacenamiento en la Nube</option>
                        <option value="historico">Data Warehouse (Hist√≥rico)</option>
                    </select>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>Escenario B:</strong> Datos hist√≥ricos de 10 a√±os que se consultan ocasionalmente para an√°lisis</p>
                    <select id="storage2">
                        <option value="">Seleccionar m√©todo...</option>
                        <option value="memoria">En Memoria (RAM/Cache)</option>
                        <option value="base">Base de Datos Transaccional</option>
                        <option value="archivo">Sistema de Archivos</option>
                        <option value="nube">Almacenamiento en la Nube</option>
                        <option value="historico">Data Warehouse (Hist√≥rico)</option>
                    </select>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>Escenario C:</strong> Documentos PDF y contratos que necesitan ser accesibles pero no cambian frecuentemente</p>
                    <select id="storage3">
                        <option value="">Seleccionar m√©todo...</option>
                        <option value="memoria">En Memoria (RAM/Cache)</option>
                        <option value="base">Base de Datos Transaccional</option>
                        <option value="archivo">Sistema de Archivos</option>
                        <option value="nube">Almacenamiento en la Nube</option>
                        <option value="historico">Data Warehouse (Hist√≥rico)</option>
                    </select>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>Escenario D:</strong> Informaci√≥n que debe estar disponible desde cualquier ubicaci√≥n geogr√°fica con respaldo autom√°tico</p>
                    <select id="storage4">
                        <option value="">Seleccionar m√©todo...</option>
                        <option value="memoria">En Memoria (RAM/Cache)</option>
                        <option value="base">Base de Datos Transaccional</option>
                        <option value="archivo">Sistema de Archivos</option>
                        <option value="nube">Almacenamiento en la Nube</option>
                        <option value="historico">Data Warehouse (Hist√≥rico)</option>
                    </select>
                </div>

                <div style="margin: 20px 0;">
                    <p><strong>Escenario E:</strong> Registros de ventas del d√≠a que se est√°n procesando activamente con actualizaciones constantes</p>
                    <select id="storage5">
                        <option value="">Seleccionar m√©todo...</option>
                        <option value="memoria">En Memoria (RAM/Cache)</option>
                        <option value="base">Base de Datos Transaccional</option>
                        <option value="archivo">Sistema de Archivos</option>
                        <option value="nube">Almacenamiento en la Nube</option>
                        <option value="historico">Data Warehouse (Hist√≥rico)</option>
                    </select>
                </div>

                <button onclick="checkSection5()">Resolver el Caso</button>
                <div class="feedback" id="feedback5"></div>
            </div>

            <div class="hint">
                üí° <strong>Pista:</strong> Considera la velocidad de acceso necesaria, la frecuencia de consulta, el tipo de contenido y la necesidad de acceso remoto o distribuido.
            </div>
        </div>
        
        <!-- Mensaje final de √©xito (Mejora: se a√±ade un mensaje final visible al resolver el caso) -->
        <div class="section final-message" id="finalMessage" style="display: none;">
            <h3>¬°FELICIDADES! CASO RESUELTO</h3>
            <p>Has demostrado ser un experto en clasificaci√≥n y gesti√≥n de datos. La integridad de DataCorp ha sido restaurada gracias a tu habilidad para identificar, clasificar y proteger la informaci√≥n. ¬°El sospechoso ha sido identificado y los datos est√°n seguros!</p>
            <p><strong>CLAVE FINAL: MAESTRO-CLIENTES-95-456</strong></p>
        </div>
    </div>

    <!-- Enlace al archivo JavaScript externo -->
    <script src="script.js"></script>
</body>
</html>
